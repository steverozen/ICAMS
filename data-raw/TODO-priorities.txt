# ICAMS to do list, 2019 07 07

## Highest priority
1.1 Steve Background signature subtraction
1.2 Steve assess feasibility of a shiny or other portable app / is web page easier? Docker?
1.2.1 Steve find shiny expert to discuss (Alvin)

## High priority


2.1 Steve Single-click script (as interim for 1.1); docker?
2.1.1 outputs the standard plots and catalogs.
2.1.2 a report with
2.1.2.1 (Arnoud's idea, need to discuss) 
        Mutation loads (per mutation type, 
        and compare to the background levels in
        the background controls we have, and perhaps also cosine to the background signature?)
2.1.2.2 Percentage of DBS relative to SBS
2.2 Nanhai Corrections to documention for StrelkaSBSVCFFilesToCatalogAndPlotToPdf and 
2.3 Nanhai Corrections to documention for StrelkaSBSVCFFilesToCatalogAndPlotToPdf and 
   similar functions.  These functions generate multiple PDF files and this is not
   clear in the documentation; It is also not clear that the output.file is
   just a base name, and it is not clear what the names of the output files will be.
2.4 Nanhai Add test functions that create all types of plots and leave the .pdfs for visual
    inspection relative to saved examples in data-raw.  Possibly extend to auto checking
    by diffing the PDFs.
2.5 Nanhai binom test for transcription strand bias
2.6 Nanhai Functions to re-write annotated VCFS back to disk (design?)
2.7 Nanhai Corrections to extended sequence plotting for SBS (Steve forgets what these are)
2.8 Nanhai Extended sequence plotting for ID, DNS
2.9 Nanhai Add test of error reporting when user supplies incorrect ref.genome (ref.genome)
2.10 Nanhai update as.catalog to take an additional argument, called infer.rownames,
that if TRUE will allow as.catalog to take a matrix *without* rownames and an 
assume that the rows are in the correct order and simply add the correct rownames based
on the number of rows in the matrix. The documentation should warn that it is completely
up the user to be sure the rows are in the correct order.

## Medium priority3
3.1 Make a full transcriptional strand bias plot for DBS144 catalog.
3.2 Put a legend on the top right part of the graph to indicate the type of plotting? (counts, density, counts proportion, density proportion?)
3.3 Update as.catalog() function to ensure the catalog rows are in the expected order and have the expected row names?
3.4 Plot transcription strand bias as function of distance from TSS
3.5 Plot transcription strand bias as function of expression level
3.6 Function to filter VCF for homoplymers for human and mouse (consult w/ Mo, maybe make script)
3.7 Provide documentaiton on how row-names in catalogs encode mutations.
3.8 Clean up plotting funcions (useless calls to invisible(), also, try
     on.exit(dev.off(), add = TRUE))
3.9 Also, in all plots, should we also include a comment box as our old script
     also has; specifying the date of printing, and the genome/abundance of 
     the data that was plotted? 
     Also a additional text provided by user 
     (Other processing information; should this be
     an attribute, or just included as a user note --
     example would be whether background removal was done, but could also
     include signature extraction information (?)
3.10 Add error checking for cbinding catalogs with different attributes

## Low priority
4.1 Should we create an intermediate catalog class that captures commonalties among all catalogs (e.g. the cbind and [ methods?)
4.2 Update WriteCatalog() function to write the attributes of a catalog in the first few rows?
4.3	Update ReadCatalog() function to automatically read in the attributes of the input catalog based on the first few rows in the file?
4.4 Develop extended seq.context plotting functions for DBS and INDEL.
4.5 Should StrelkaSBSVCFFilesToCatalogAndPlotToPdf() and similar functions also save the catalogs to files?
4.6 Utility function to split VCF by VAF according to Arnoud? suggestion previously.
4.7 Add Freebayes VCFs as an option in ICAMS.
4.8 Update the legend in 1536 catalog plotting according to Liu Mo?s suggestion?
4.9 More automatic tests for genomes that do not have built-in support
4.10 binomial tests for extended sequence context (e.g. enrichment of A 3 bp 5' of the mutation)
4.11 Review Matas' comments on documentation
4.12 Allow as.catalog to work on a numeric vector (interpreting it as a
     matrix w/ one column)

## Maybe

5.1 Read in MAF files
5.2 Maybe: Should it be possible to supply a directory as input to
    StrelkaSBSVCFFilesToCatalogAndPlotToPDF and then take any VCF files in 
    the directory and put all the PDFs in that directory?

## Done

done 1.1 Nanhai Address CRAN comments
done 1.1.1 Nanhai Add examples to documentation (key functions only for now)
      Suggest to create an example for each, should be as simple as
      possible, then we can review again
done 1.1.2 Nanhai, other CRAN comments
done 1.2 Nanhai Checks for functions ReadAndSplitStrelkaSBSVCFs(), ReadStrelkaIDVCFs() according to Arnoud?s suggestion in the email.
done 1.3 Nanhai Change the PPM plot functions according to Arnoud? suggestion in the email.
done 2.0 Calculate VAFs from newer MuTect output Steve? Nanhai?
done 2.0.1 Tests for reading mouse MuTect and Strelka VCFs?
done 3.10 Nanhai test mouse mm10 on MuTect VCF
